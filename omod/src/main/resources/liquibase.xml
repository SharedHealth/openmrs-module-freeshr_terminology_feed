<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="BD-201408041330" author="soham" context="setup">
        <comment>Added constraints to concept_reference_source table.</comment>
        <sql>
            ALTER TABLE concept_reference_source ADD UNIQUE (name);
        </sql>
    </changeSet>
    <changeSet id="BD-201411181657" author="neha" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from chunking_history;
            </sqlCheck>
        </preConditions>
        <comment>Add chunking history</comment>
        <sql>
            insert into chunking_history (id, chunk_length, start) values (1, 100, 1);
        </sql>
    </changeSet>
    <changeSet id="BD-201412011225" author="angshu" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_class where LOWER(name) = 'valueset';
            </sqlCheck>
        </preConditions>
        <comment>Add concept class valueset</comment>
        <sql>
            INSERT INTO concept_class (name, description, uuid, creator, date_created) values ('Valueset', 'FHIR valueset', uuid(), 1, NOW());
        </sql>
    </changeSet>

    <changeSet id="BD-201412031205" author="utsab" context="setup">
        <comment>Add concept procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031206" author="utsab" context="setup">
        <comment>Add concept answer procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptAnswerProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031207" author="utsab" context="setup">
        <comment>Add concept word procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptWordProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031209" author="utsab" context="setup">
        <comment>Add concept description procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptDescriptionProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031210" author="utsab" context="setup">
        <comment>Add concept reference map procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptReferenceMapProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031211" author="utsab" context="setup">
        <comment>Add concept set members procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptSetMembersProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031212" author="utsab" context="setup">
        <comment>Add concept numeric proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptNumericProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412041217" author="utsab" context="setup">
        <comment>Add concept event proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptEventsProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412041221" author="utsab" context="setup">
        <comment>Add concept reference event proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptReferenceEventProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031409" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'ICD10-BD';
            </sqlCheck>
        </preConditions>
        <comment>Adding ICD10-BD concept reference source</comment>
        <insert tableName="concept_reference_source">
            <column name="name" value="ICD10-BD"/>
            <column name="description" value="ICD10-BD"/>
            <column name="hl7_code" value="ICD10-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201412031412" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'SNOMED-CT-BD';
            </sqlCheck>
        </preConditions>
        <comment>Adding SNOMED-CT-BD concept reference source</comment>
        <insert tableName="concept_reference_source">
            <column name="name" value="SNOMED-CT-BD"/>
            <column name="description" value="Systematized Nomenclature of Medicine Clinical Terms for Bangladesh"/>
            <column name="hl7_code" value="SNOMED-CT-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201412031415" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'LOINC-BD';
            </sqlCheck>
        </preConditions>
        <comment>Adding LOINC-BD concept reference source</comment>
        <insert tableName="concept_reference_source">
            <column name="name" value="LOINC-BD"/>
            <column name="description" value="These are codes for tests"/>
            <column name="hl7_code" value="LOINC-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201511021453" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Suggestive Templates';
            </sqlCheck>
        </preConditions>
        <comment>Adding concept set Templates</comment>
        <sql>
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;

            call add_concept(@concept_id, @concept_name_short_id,
            @concept_name_full_id, 'Suggestive Templates', 'Suggestive Templates', 'N/A', 'ConvSet', true);
            call add_concept_word(@concept_id, @concept_name_short_id, 'ROUTE', 1);
            call add_concept_word(@concept_id, @concept_name_full_id,'ADMINISTRATION', 1);
            call add_concept_events(@concept_id, 'ConvSet', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201412171455" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Units of Time';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_units_of_time = 0;
            set @concept_name_short_id_units_of_time = 0;
            set @concept_name_full_id_units_of_time = 0;

            set @concept_id_second = 0;
            set @concept_name_short_id_second = 0;
            set @concept_name_full_id_second = 0;

            set @concept_id_minute = 0;
            set @concept_name_short_id_minute = 0;
            set @concept_name_full_id_minute = 0;

            set @concept_id_hour = 0;
            set @concept_name_short_id_hour = 0;
            set @concept_name_full_id_hour = 0;

            set @concept_id_day = 0;
            set @concept_name_short_id_day = 0;
            set @concept_name_full_id_day = 0;

            set @concept_id_week = 0;
            set @concept_name_short_id_week = 0;
            set @concept_name_full_id_week = 0;

            set @concept_id_month = 0;
            set @concept_name_short_id_month = 0;
            set @concept_name_full_id_month = 0;

            set @concept_id_year = 0;
            set @concept_name_short_id_year = 0;
            set @concept_name_full_id_year = 0;

            call add_concept(@concept_id_units_of_time, @concept_name_short_id_units_of_time,
            @concept_name_full_id_units_of_time,
            'Units of Time', 'Units of Time', 'Coded', 'Valueset', false);

            call add_concept(@concept_id_second, @concept_name_short_id_second, @concept_name_full_id_second, 'second',
            's', 'N/A', 'Misc', false);
            call add_concept(@concept_id_minute, @concept_name_short_id_minute, @concept_name_full_id_minute, 'minute',
            'm', 'N/A', 'Misc', false);
            call add_concept(@concept_id_hour, @concept_name_short_id_hour, @concept_name_full_id_hour, 'hour', 'h',
            'N/A', 'Misc', false);
            call add_concept(@concept_id_day, @concept_name_short_id_day, @concept_name_full_id_day, 'day', 'd', 'N/A',
            'Misc', false);
            call add_concept(@concept_id_week, @concept_name_short_id_week, @concept_name_full_id_week, 'week', 'wk',
            'N/A', 'Misc', false);
            call add_concept(@concept_id_month, @concept_name_short_id_month, @concept_name_full_id_month, 'month',
            'mo', 'N/A', 'Misc', false);
            call add_concept(@concept_id_year, @concept_name_short_id_year, @concept_name_full_id_year, 'year', 'a',
            'N/A', 'Misc', false);

            call add_concept_answer(@concept_id_units_of_time, @concept_id_second, 1);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_minute, 2);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_hour, 3);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_day, 4);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_week, 5);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_month, 6);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_year, 7);

            call add_concept_word(@concept_id_units_of_time, @concept_name_short_id_units_of_time, 'UNIT', 1);
            call add_concept_word(@concept_id_units_of_time, @concept_name_full_id_units_of_time, 'TIME', 1);

            call add_concept_word(@concept_id_second, @concept_name_full_id_second, 'SECOND', 1);
            call add_concept_word(@concept_id_minute, @concept_name_full_id_minute, 'MINUTE', 1);
            call add_concept_word(@concept_id_hour, @concept_name_full_id_hour, 'HOUR', 1);
            call add_concept_word(@concept_id_day, @concept_name_full_id_day, 'DAY', 1);
            call add_concept_word(@concept_id_week, @concept_name_full_id_week, 'WEEK', 1);
            call add_concept_word(@concept_id_month, @concept_name_full_id_month, 'MONTH', 1);
            call add_concept_word(@concept_id_year, @concept_name_full_id_year, 'YEAR', 1);

            call add_concept_events(@concept_id_units_of_time, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_second, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_minute, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_hour, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_day, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_week, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_month, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_year, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201412171635" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Quantity Units';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_quantity_units = 0;
            set @concept_name_short_id_quantity_units = 0;
            set @concept_name_full_id_quantity_units = 0;

            set @concept_id_gram = 0;
            set @concept_name_short_id_gram = 0;
            set @concept_name_full_id_gram = 0;

            set @concept_id_milligram = 0;
            set @concept_name_short_id_milligram = 0;
            set @concept_name_full_id_milligram = 0;

            set @concept_id_microgram = 0;
            set @concept_name_short_id_microgram = 0;
            set @concept_name_full_id_microgram = 0;

            set @concept_id_unit = 0;
            set @concept_name_short_id_unit = 0;
            set @concept_name_full_id_unit = 0;

            set @concept_id_thousand_units = 0;
            set @concept_name_short_id_thousand_units = 0;
            set @concept_name_full_id_thousand_units = 0;

            set @concept_id_million_units = 0;
            set @concept_name_short_id_million_units = 0;
            set @concept_name_full_id_million_units = 0;

            set @concept_id_millimole = 0;
            set @concept_name_short_id_millimole = 0;
            set @concept_name_full_id_millimole = 0;

            set @concept_id_millilitre = 0;
            set @concept_name_short_id_millilitre = 0;
            set @concept_name_full_id_millilitre = 0;

            call add_concept(@concept_id_quantity_units, @concept_name_short_id_quantity_units,
            @concept_name_full_id_quantity_units,
            'Quantity Units', 'Quantity Units', 'Coded', 'Valueset', false);

            call add_concept(@concept_id_gram, @concept_name_short_id_gram, @concept_name_full_id_gram, 'gram', 'g',
            'N/A', 'Misc', false);
            call add_concept(@concept_id_milligram, @concept_name_short_id_milligram, @concept_name_full_id_milligram,
            'milligram', 'mg', 'N/A', 'Misc', false);
            call add_concept(@concept_id_microgram, @concept_name_short_id_microgram, @concept_name_full_id_microgram,
            'microgram', 'mcg', 'N/A', 'Misc', false);
            call add_concept(@concept_id_unit, @concept_name_short_id_unit, @concept_name_full_id_unit, 'unit', 'U',
            'N/A', 'Misc', false);
            call add_concept(@concept_id_thousand_units, @concept_name_short_id_thousand_units,
            @concept_name_full_id_thousand_units, 'thousand units', 'TU', 'N/A', 'Misc', false);
            call add_concept(@concept_id_million_units, @concept_name_short_id_million_units,
            @concept_name_full_id_million_units, 'million units', 'MU', 'N/A', 'Misc', false);
            call add_concept(@concept_id_millimole, @concept_name_short_id_millimole, @concept_name_full_id_millimole,
            'millimole', 'mmol', 'N/A', 'Misc', false);
            call add_concept(@concept_id_millilitre, @concept_name_short_id_millilitre,
            @concept_name_full_id_millilitre, 'millilitre', 'ml', 'N/A', 'Misc', false);

            call add_concept_answer(@concept_id_quantity_units, @concept_id_gram, 1);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_milligram, 2);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_microgram, 3);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_unit, 4);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_thousand_units, 5);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_million_units, 6);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_millimole, 7);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_millilitre, 8);

            call add_concept_word(@concept_id_quantity_units, @concept_name_short_id_quantity_units, 'UNIT', 1);
            call add_concept_word(@concept_id_quantity_units, @concept_name_full_id_quantity_units, 'QUANTITY', 1);

            call add_concept_word(@concept_id_gram, @concept_name_full_id_gram, 'GRAM', 1);
            call add_concept_word(@concept_id_milligram, @concept_name_full_id_milligram, 'MILLIGRAM', 1);
            call add_concept_word(@concept_id_microgram, @concept_name_full_id_microgram, 'MICROGRAM', 1);
            call add_concept_word(@concept_id_unit, @concept_name_full_id_unit, 'UNIT', 1);
            call add_concept_word(@concept_id_thousand_units, @concept_name_full_id_thousand_units, 'THOUSAND', 1);
            call add_concept_word(@concept_id_thousand_units, @concept_name_short_id_thousand_units, 'UNITS', 1);
            call add_concept_word(@concept_id_million_units, @concept_name_full_id_million_units, 'MILLION', 1);
            call add_concept_word(@concept_id_million_units, @concept_name_short_id_million_units, 'UNITS', 1);
            call add_concept_word(@concept_id_millimole, @concept_name_full_id_millimole, 'MILLIMOLE', 1);
            call add_concept_word(@concept_id_millilitre, @concept_name_full_id_millilitre, 'MILLILITRE', 1);

            call add_concept_events(@concept_id_quantity_units, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_gram, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_milligram, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_microgram, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_unit, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_thousand_units, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_million_units, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_millimole, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_events(@concept_id_millilitre, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201412171735" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Route of Administration';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_route_of_administration = 0;
            set @concept_name_short_id_route_of_administration = 0;
            set @concept_name_full_id_route_of_administration = 0;

            set @concept_id_implant = 0;
            set @concept_name_short_id_implant = 0;
            set @concept_name_full_id_implant = 0;

            call add_concept(@concept_id_route_of_administration, @concept_name_short_id_route_of_administration,
            @concept_name_full_id_route_of_administration,
            'Route of Administration', 'Route of Administration', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_route_of_administration, @concept_name_short_id_route_of_administration,
            'ROUTE', 1);
            call add_concept_word(@concept_id_route_of_administration, @concept_name_full_id_route_of_administration,
            'ADMINISTRATION', 1);
            call add_concept_events(@concept_id_route_of_administration, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id_implant, @concept_name_short_id_implant, @concept_name_full_id_implant,
            'implant', 'implant', 'N/A', 'Misc', false);
            call add_concept_answer(@concept_id_route_of_administration, @concept_id_implant, 1);
            call add_concept_word(@concept_id_implant, @concept_name_short_id_implant, 'IMPLANT', 1);
            call add_concept_events(@concept_id_implant, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201501021144" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Immunization Reason';
            </sqlCheck>
        </preConditions>
        <comment>Creating Travel Vaccinations Valueset</comment>
        <sql>
            set @concept_id_immunization_reason = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_travel_vaccinations_id=0;
            set @concept_source_id_for_SNOMED=0;
            set @concept_map_type_id_for_SAMEAS=0;
            set @reference_term_id=0;

            -- Creating Travel Vaccinations concept
            call add_concept(@concept_travel_vaccinations_id, @concept_name_short_id, @concept_name_full_id,
            'Travel vaccinations', 'Travel vaccinations', 'N/A', 'Misc', false);
            call add_concept_word(@concept_travel_vaccinations_id, @concept_name_short_id, 'TRAVEL', 1);
            call add_concept_word(@concept_travel_vaccinations_id, @concept_name_short_id, 'VACCINATIONS', 1);
            call add_concept_events(@concept_travel_vaccinations_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            -- Creating Travel Vaccinations Reference term concept
            select concept_source_id into @concept_source_id_for_SNOMED from concept_reference_source where name =
            'SNOMED-CT-BD';
            select concept_map_type_id into @concept_map_type_id_for_SAMEAS from concept_map_type where name =
            'SAME-AS';
            call add_concept_reference_map(@reference_term_id, @concept_travel_vaccinations_id, @concept_source_id_for_SNOMED, '281657000',
            'Travel vaccinations', @concept_map_type_id_for_SAMEAS);
            call add_concept_reference_events(@reference_term_id, '/openmrs/ws/rest/v1/tr/referenceterms/');

            -- Creating Immunization Reason Valueset concept and adding Travel Vaccinations as answer
            call add_concept(@concept_id_immunization_reason, @concept_name_short_id, @concept_name_full_id,
            'Immunization Reason', 'Immunization Reason', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_immunization_reason, @concept_name_short_id, 'IMMUNIZATION', 1);
            call add_concept_word(@concept_id_immunization_reason, @concept_name_short_id, 'REASON', 1);
            call add_concept_answer(@concept_id_immunization_reason, @concept_travel_vaccinations_id, 1);
            call add_concept_events(@concept_id_immunization_reason, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201505211432" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'No Immunization Reason';
            </sqlCheck>
        </preConditions>
        <comment>Creating Travel Vaccinations Valueset</comment>
        <sql>
            set @concept_id_no_immunization_reason = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_patient_obj_id=0;
            set @concept_source_id_for_SNOMED=0;
            set @concept_map_type_id_for_SAMEAS=0;

            -- Creating Patient Objection concept
            call add_concept(@concept_patient_obj_id, @concept_name_short_id, @concept_name_full_id,
            'patient objection', 'PATOBJ', 'N/A', 'Misc', false);
            call add_concept_word(@concept_patient_obj_id, @concept_name_short_id, 'PATIENT', 1);
            call add_concept_word(@concept_patient_obj_id, @concept_name_short_id, 'OBJECTION', 1);
            call add_concept_events(@concept_patient_obj_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            -- Creating No Immunization Reason Valueset concept and adding parent objection as answer
            call add_concept(@concept_id_no_immunization_reason, @concept_name_short_id, @concept_name_full_id,
            'No Immunization Reason', 'No Immunization Reason', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_no_immunization_reason, @concept_name_short_id, 'IMMUNIZATION', 1);
            call add_concept_word(@concept_id_no_immunization_reason, @concept_name_short_id, 'REASON', 1);
            call add_concept_answer(@concept_id_no_immunization_reason, @concept_patient_obj_id, 1);
            call add_concept_events(@concept_id_no_immunization_reason, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>

    <changeSet id="BD-201504081208" author="angshu" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from role where role = 'TR API CONSUMER';
            </sqlCheck>
        </preConditions>
        <comment>Add TR API CONSUMER role</comment>
        <sql>
            insert into role (role, description) values ('TR API CONSUMER', 'Terminologies REST API User. This is meant
            for public');
            delete from role_privilege where role = 'TR API CONSUMER';
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'View Concept Classes');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'View Concept Datatypes');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'View Concept Sources');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'Get Concept Reference Terms');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'View Concepts');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'View RESTWS');
            insert into role_privilege (role, privilege) values ('TR API CONSUMER', 'Get Concepts');
        </sql>
    </changeSet>
    <changeSet id="BD-201504211623" author="neha">
        <preConditions>
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Relationship Type' and concept_name_type='FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding Relation Valueset</comment>
        <sql>
            set @relationship_type_concept_id = 0;
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;

            call add_concept(@relationship_type_concept_id, @concept_name_short_id, @concept_name_full_id,
            'Relationship Type', 'relationship type', 'Coded', 'Valueset', false);
            call add_concept_word(@relationship_type_concept_id, @concept_name_short_id, 'Relationship', 1);
            call add_concept_word(@relationship_type_concept_id, @concept_name_short_id, 'Type', 1);

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'father', 'FTH', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'FATHER', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 1);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'mother', 'MTH', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'MOTHER', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 2);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'child', 'CHILD', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'CHILD', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 3);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'spouse', 'SPS', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'SPOUSE', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 4);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'sibling', 'SIB', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'SIBLING', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 5);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'family member', 'FAMMEMB', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'FAMILY MEMBER', 1);
            call add_concept_answer(@relationship_type_concept_id, @concept_id, 6);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept_events(@relationship_type_concept_id, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201504211648" author="neha">
        <preConditions>
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Encounter Type' and concept_name_type='FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding Encounter Type Valueset</comment>
        <sql>
            set @encounter_type_concept_id = 0;
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;

            call add_concept(@encounter_type_concept_id, @concept_name_short_id, @concept_name_full_id,
            'Encounter Type', 'encounter type', 'Coded', 'Valueset', false);
            call add_concept_word(@encounter_type_concept_id, @concept_name_short_id, 'Encounter', 1);
            call add_concept_word(@encounter_type_concept_id, @concept_name_short_id, 'Type', 1);
            call add_concept_events(@encounter_type_concept_id, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Registration', 'REG', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Registration', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'IPD', 1);
            call add_concept_answer(@encounter_type_concept_id, @concept_id, 1);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Outpatient', 'OPD', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Outpatient', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'OPD', 1);
            call add_concept_answer(@encounter_type_concept_id, @concept_id, 2);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Inpatient', 'IPD', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Inpatient', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'IPD', 1);
            call add_concept_answer(@encounter_type_concept_id, @concept_id, 2);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Emergency', 'EME', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Emergency', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'EME', 1);
            call add_concept_answer(@encounter_type_concept_id, @concept_id, 2);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept_events(@encounter_type_concept_id, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201504281848" author="neha">
        <preConditions>
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Field' and concept_name_type='FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding Encounter Type Field</comment>
        <sql>
            set @encounter_type_concept_id = 0;
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;

            select concept_id into @encounter_type_concept_id from concept_name where name = 'Encounter Type' and concept_name_type='FULLY_SPECIFIED';

            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Field', 'FLD', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'FIELD', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'FLD', 1);
            call add_concept_answer(@encounter_type_concept_id, @concept_id, 5);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');

            call add_concept_events(@encounter_type_concept_id, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201505131351" author="sanjana">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Unspecified cause of death' and concept_name_type='FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding Unspecified cause of death as default</comment>
        <sql>
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;


            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Unspecified cause of death', 'Unspecified cause of death', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'Unspecified', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'cause', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'death', 1);
            call add_concept_events(@concept_id, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201506021322" author="neha" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_class where LOWER(name) = 'labtest';
            </sqlCheck>
        </preConditions>
        <comment>Add concept class valueset</comment>
        <sql>
            INSERT INTO concept_class (name, description, uuid, creator, date_created) values ('LabTest', 'Laboratory Tests class', uuid(), 1, NOW());
        </sql>
    </changeSet>

    <changeSet id="BD-201509021502" author="neha" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'WHO ATC-BD';
            </sqlCheck>
        </preConditions>
        <comment>Adding WHO ATC-BD concept reference source</comment>
        <insert tableName="concept_reference_source">
            <column name="name" value="WHO ATC-BD"/>
            <column name="description" value="WHO ATC-BD"/>
            <column name="hl7_code" value="WHO ATC-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>
    <changeSet id="BD-201509081832" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Procedure Outcome';
            </sqlCheck>
        </preConditions>
        <comment>Creating Procedure Outcome Valueset</comment>
        <sql>
            set @concept_id_procedure_outcome = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_id_answer=0;
            set @concept_source_id_for_SNOMED=0;
            set @concept_map_type_id_for_SAMEAS=0;
            set @reference_id=0;

            -- Creating Procedure Outcome Valueset concept
            call add_concept(@concept_id_procedure_outcome, @concept_name_short_id, @concept_name_full_id,
            'Procedure Outcome', 'Procedure Outcome', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_procedure_outcome, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_procedure_outcome, @concept_name_short_id, 'OUTCOME', 1);

            -- Selecting Snomed source and SameAs map type
            select concept_source_id into @concept_source_id_for_SNOMED from concept_reference_source where name =
            'SNOMED-CT-BD';
            select concept_map_type_id into @concept_map_type_id_for_SAMEAS from concept_map_type where name =
            'SAME-AS';

            -- Creating Successful concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Outcome Successful', 'Successful', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'OUTCOME', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'SUCCESSFUL', 1);

            call add_concept_reference_map(@reference_id, @concept_id_answer, @concept_source_id_for_SNOMED, '385669000',
            'Successful', @concept_map_type_id_for_SAMEAS);
            call add_concept_reference_events(@reference_id, '/openmrs/ws/rest/v1/tr/referenceterms/');

            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_outcome, @concept_id_answer, 1);

            -- Creating Unsuccessful concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Outcome Unsuccessful', 'Unsuccessful', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'OUTCOME', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'UNSUCCESSFUL', 1);

            call add_concept_reference_map(@reference_id, @concept_id_answer, @concept_source_id_for_SNOMED, '385671000',
            'Unsuccessful', @concept_map_type_id_for_SAMEAS);
            call add_concept_reference_events(@reference_id, '/openmrs/ws/rest/v1/tr/referenceterms/');

            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_outcome, @concept_id_answer, 1);

            -- Creating Partially successful concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Outcome Partially Successful', 'Partially Successful', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'OUTCOME', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PARTIALLY', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'SUCCESSFUL', 1);

            call add_concept_reference_map(@reference_id, @concept_id_answer, @concept_source_id_for_SNOMED, '385670004',
            'Partially successful', @concept_map_type_id_for_SAMEAS);
            call add_concept_reference_events(@reference_id, '/openmrs/ws/rest/v1/tr/referenceterms/');

            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_outcome, @concept_id_answer, 1);

            -- adding concept answers and creating event for procedure outcome
            call add_concept_events(@concept_id_procedure_outcome, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201509091132" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Procedure Followup';
            </sqlCheck>
        </preConditions>
        <comment>Creating Procedure Follow up Valueset</comment>
        <sql>
            set @concept_id_procedure_followup = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;

            -- Creating Procedure Follow up Valueset concept
            call add_concept(@concept_id_procedure_followup, @concept_name_short_id, @concept_name_full_id,
            'Procedure Followup', 'Procedure Followup', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_procedure_followup, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_procedure_followup, @concept_name_short_id, 'FOLLOWUP', 1);
            call add_concept_events(@concept_id_procedure_followup, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201509091133" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Procedure Status';
            </sqlCheck>
        </preConditions>
        <comment>Creating Procedure Status Valueset</comment>
        <sql>
            set @concept_id_procedure_status = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_id_answer=0;

            -- Creating Procedure Status Valueset concept
            call add_concept(@concept_id_procedure_status, @concept_name_short_id, @concept_name_full_id,
            'Procedure Status', 'Procedure Status', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_procedure_status, @concept_name_short_id, 'PROCEDURE', 1);
            call add_concept_word(@concept_id_procedure_status, @concept_name_short_id, 'STATUS', 1);

            -- Creating In progress concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Status In Progress', 'in-progress', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'IN', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PROGRESS', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_status, @concept_id_answer, 1);

            -- Creating Aborted concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Status Aborted', 'aborted', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ABORTED', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_status, @concept_id_answer, 1);

            -- Creating Completed concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Status Completed', 'completed', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'COMPLETED', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_status, @concept_id_answer, 1);

            -- Creating Entered In Error concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Procedure Status Entered In Error', 'entered-in-error', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ENTERED', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'IN', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ERROR', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_procedure_status, @concept_id_answer, 1);

            -- adding concept answers and creating event for procedure status
            call add_concept_events(@concept_id_procedure_status, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201509181800" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Immunization Status';
            </sqlCheck>
        </preConditions>
        <comment>Creating Immunization Status Valueset</comment>
        <sql>
            set @concept_id_immunization_status = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_id_answer=0;

            -- Creating Immunization Status Valueset concept
            call add_concept(@concept_id_immunization_status, @concept_name_short_id, @concept_name_full_id,
            'Immunization Status', 'Immunization Status', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_immunization_status, @concept_name_short_id, 'Immunization', 1);
            call add_concept_word(@concept_id_immunization_status, @concept_name_short_id, 'STATUS', 1);

            -- Creating In progress concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Immunization Status In Progress', 'in-progress', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'IN', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'PROGRESS', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_immunization_status, @concept_id_answer, 1);

            -- Creating Aborted concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Immunization Status Aborted', 'aborted', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ABORTED', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_immunization_status, @concept_id_answer, 1);

            -- Creating Completed concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Immunization Status Completed', 'completed', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'COMPLETED', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_immunization_status, @concept_id_answer, 1);

            -- Creating Entered In Error concept
            call add_concept(@concept_id_answer, @concept_name_short_id, @concept_name_full_id,
            'Immunization Status Entered In Error', 'entered-in-error', 'N/A', 'Misc', false);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ENTERED', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'IN', 1);
            call add_concept_word(@concept_id_answer, @concept_name_short_id, 'ERROR', 1);
            call add_concept_events(@concept_id_answer, 'Misc', '/openmrs/ws/rest/v1/tr/concepts/');
            call add_concept_answer(@concept_id_immunization_status, @concept_id_answer, 1);

            -- adding concept answers and creating event for procedure status
            call add_concept_events(@concept_id_immunization_status, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201510121513" author="neha">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="1">
                select count(*) from concept_name where name = 'Procedure Followup' and concept_name_type = 'FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Retiring Procedure Followup Valueset</comment>
        <sql>
            set @concept_id_procedure_followup = 0;

            -- Retiring Procedure Follow up Valueset concept
            select concept_id into @concept_id_procedure_followup from concept_name where name = 'Procedure Followup' and concept_name_type = 'FULLY_SPECIFIED';
            update concept_name set name = 'Procedure Followup Retired' where concept_id = @concept_id_procedure_followup;
            update concept set retired = 1, date_retired = now(), retire_reason = 'Should not be a valueset', retired_by = 1 where concept_id = @concept_id_procedure_followup;
            call add_concept_events(@concept_id_procedure_followup, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201510151222" author="angshu">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Medication Forms' and concept_name_type = 'FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding placeholder valueset for Medication Forms</comment>
        <sql>
            set @concept_id_med_form = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            call add_concept(@concept_id_med_form, @concept_name_short_id, @concept_name_full_id, 'Medication Forms', 'Medication Forms', 'Coded', 'Valueset', false);
            call add_concept_events(@concept_id_med_form, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201510151231" author="angshu">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Medication Package Forms' and concept_name_type = 'FULLY_SPECIFIED';
            </sqlCheck>
        </preConditions>
        <comment>Adding placeholder valueset for Medication Forms</comment>
        <sql>
            set @concept_id_med_pkg_form = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            call add_concept(@concept_id_med_pkg_form, @concept_name_short_id, @concept_name_full_id, 'Medication Package Forms', 'Medication Package Forms', 'Coded', 'Valueset', false);
            call add_concept_events(@concept_id_med_pkg_form, 'Valueset', '/openmrs/ws/rest/v1/tr/concepts/');
        </sql>
    </changeSet>
    <changeSet id="BD-201510171615" author="angshu" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM scheduler_task_config where schedulable_class = 'org.openmrs.module.atomfeed.scheduler.tasks.EventRecordsNumberOffsetMarkerTask'
            </sqlCheck>
        </preConditions>
        <comment>event records offset marker scheduler</comment>
        <insert tableName="scheduler_task_config">
            <column name="name" value="OpenMRS event offset marker task"/>
            <column name="schedulable_class" value="org.openmrs.module.atomfeed.scheduler.tasks.EventRecordsNumberOffsetMarkerTask"/>
            <column name="start_time" valueDate=" now() "/>
            <column name="start_time_pattern" value="MM/dd/yyyy HH:mm:ss"/>
            <column name="repeat_interval" value="86400"/>
            <column name="start_on_startup" value="1"/>
            <column name="started" value="1"/>
            <column name="created_by" value="1"/>
            <column name="date_created" valueDate=" now() "/>
            <column name="uuid" valueComputed=" uuid() "/>
        </insert>
    </changeSet>
    <changeSet id="BD-201510171637" author="angshu" context="setup">
        <preConditions onFail="MARK_RAN">
            <not>
                <indexExists indexName="event_records_category_idx"/>
            </not>
        </preConditions>
        <comment>index event_records.category</comment>
        <createIndex indexName="event_records_category_idx" tableName="event_records">
            <column name="category" type="varchar(255)"/>
        </createIndex>
    </changeSet>
</databaseChangeLog>