<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="BD-201408041330" author="soham" context="setup">
        <comment>Added constraints to concept_reference_source table.</comment>
        <sql>
            ALTER TABLE concept_reference_source ADD UNIQUE (name);
        </sql>
    </changeSet>
    <changeSet id="BD-201411181657" author="neha" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from chunking_history;
            </sqlCheck>
        </preConditions>
        <comment>Add chunking history</comment>
        <sql>
            insert into chunking_history (id, chunk_length, start) values (1, 100, 1);
        </sql>
    </changeSet>
    <changeSet id="BD-201412011225" author="angshu" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_class where LOWER(name) = 'valueset';
            </sqlCheck>
        </preConditions>
        <comment>Add concept class valueset</comment>
        <sql>
            INSERT INTO concept_class (name, description, uuid, creator, date_created) values ('Valueset', 'FHIR valueset', uuid(), 1, NOW());
        </sql>
    </changeSet>

    <changeSet id="BD-201412031205" author="utsab" context="setup">
        <comment>Add concept procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031206" author="utsab" context="setup">
        <comment>Add concept answer procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptAnswerProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031207" author="utsab" context="setup">
        <comment>Add concept word procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptWordProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031208" author="utsab" context="setup">
        <comment>Set value as concept id procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/DeleteConceptProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031209" author="utsab" context="setup">
        <comment>Add concept description procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptDescriptionProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031210" author="utsab" context="setup">
        <comment>Add concept reference map procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptReferenceMapProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031211" author="utsab" context="setup">
        <comment>Add concept set members procedure</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptSetMembersProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031212" author="utsab" context="setup">
        <comment>Add concept numeric proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptNumericProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412041217" author="utsab" context="setup">
        <comment>Add concept event proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptEventsProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412041221" author="utsab" context="setup">
        <comment>Add concept reference event proc</comment>
        <sqlFile splitStatements="false" path="storedProcedures/AddConceptReferenceEventProc.sql"/>
    </changeSet>

    <changeSet id="BD-201412031409" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'ICD10-BD';
            </sqlCheck>
        </preConditions>
        <insert tableName="concept_reference_source">
            <column name="name" value="ICD10-BD"/>
            <column name="description" value="ICD10-BD"/>
            <column name="hl7_code" value="ICD10-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201412031412" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'SNOMED-BD';
            </sqlCheck>
        </preConditions>
        <insert tableName="concept_reference_source">
            <column name="name" value="SNOMED-BD"/>
            <column name="description" value="Systematized Nomenclature of Medicine Clinical Terms for Bangladesh"/>
            <column name="hl7_code" value="SNOMED-BD"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201412031415" author="utsab" context="setup">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_reference_source where name = 'LOINC';
            </sqlCheck>
        </preConditions>
        <insert tableName="concept_reference_source">
            <column name="name" value="LOINC"/>
            <column name="description" value="These are codes for tests"/>
            <column name="hl7_code" value="LOINC"/>
            <column name="creator" value="1"/>
            <column name="date_created" valueDate=" now()"/>
            <column name="uuid" valueComputed=" uuid()"/>
        </insert>
    </changeSet>

    <changeSet id="BD-201412041450" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Death note';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_death_note = 0;
            set @concept_name_short_id_death_note = 0;
            set @concept_name_full_id_death_note = 0;

            set @reference_term = '419620001';
            set @reference_name = 'Death Alert';


            set @concept_id_date_of_death = 0;
            set @concept_name_short_id_date_of_death = 0;
            set @concept_name_full_id_date_of_death = 0;

            set @concept_id_cause_of_death = 0;
            set @concept_name_short_id_cause_of_death = 0;
            set @concept_name_full_id_cause_of_death = 0;

            set @concept_id_Circumstances_of_death = 0;
            set @concept_name_short_id_circumstances_of_death = 0;
            set @concept_name_full_id_circumstances_of_death = 0;

            call add_concept(@concept_id_death_note, @concept_name_short_id_death_note, @concept_name_full_id_death_note,
            'Death Note', 'Death Note', 'N/A', 'ConvSet', true);

            select concept_source_id into @concept_source_id_for_SNOWMED from concept_reference_source where name = 'SNOMED-BD';
            select concept_map_type_id into @concept_map_type_id_for_SAMEAS from concept_map_type where name = 'SAME-AS';

            call add_concept_reference_map(@concept_id_death_note, @concept_source_id_for_SNOWMED, @reference_term, @reference_name,
            @concept_map_type_id_for_SAMEAS);

            select MAX(concept_reference_term_id) into @concept_reference_term_id from concept_reference_term;

            call add_concept(@concept_id_date_of_death, @concept_name_short_id_date_of_death, @concept_name_full_id_date_of_death,
            'Date of death', 'date of death', 'Date', 'Question', false);

            call add_concept(@concept_id_cause_of_death, @concept_name_short_id_cause_of_death, @concept_name_full_id_cause_of_death,
            'Cause of Death', 'Cause of Death', 'Coded', 'Misc', false);

            call add_concept(@concept_id_circumstances_of_death, @concept_name_short_id_circumstances_of_death,
            @concept_name_full_id_circumstances_of_death, 'Circumstances of Death', 'Death Circumstances', 'Text', 'Question', false);

            call add_concept_set_members(@concept_id_death_note, @concept_id_date_of_death, 1);
            call add_concept_set_members(@concept_id_death_note, @concept_id_cause_of_death, 2);
            call add_concept_set_members(@concept_id_death_note, @concept_id_circumstances_of_death, 3);

            call add_concept_word(@concept_id_death_note, @concept_name_short_id_death_note, 'DEATH', '1');
            call add_concept_word(@concept_id_death_note, @concept_name_full_id_death_note, 'NOTE', '1');

            call add_concept_word(@concept_id_date_of_death, @concept_name_short_id_cause_of_death, 'DATE', '1');
            call add_concept_word(@concept_id_date_of_death, @concept_name_full_id_date_of_death, 'DEATH', '1');

            call add_concept_word(@concept_id_cause_of_death, @concept_name_short_id_cause_of_death, 'CAUSE', '1');
            call add_concept_word(@concept_id_cause_of_death, @concept_name_full_id_cause_of_death, 'DEATH', '1');

            call add_concept_word(@concept_id_circumstances_of_death, @concept_name_short_id_circumstances_of_death, 'CIRCUMSTANCE', '1');
            call add_concept_word(@concept_id_circumstances_of_death, @concept_name_full_id_circumstances_of_death, 'DEATH', '1');

            call add_concept_reference_events(@concept_reference_term_id);
            call add_concept_events(@concept_id_death_note, 'ConvSet');
            call add_concept_events(@concept_id_date_of_death, 'Question');
            call add_concept_events(@concept_id_cause_of_death, 'Misc');
            call add_concept_events(@concept_id_circumstances_of_death, 'Question');
        </sql>
    </changeSet>

    <changeSet id="BD-201412171455" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Units of Time';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_units_of_time = 0;
            set @concept_name_short_id_units_of_time = 0;
            set @concept_name_full_id_units_of_time = 0;

            set @concept_id_second = 0;
            set @concept_name_short_id_second = 0;
            set @concept_name_full_id_second = 0;

            set @concept_id_minute = 0;
            set @concept_name_short_id_minute = 0;
            set @concept_name_full_id_minute = 0;

            set @concept_id_hour = 0;
            set @concept_name_short_id_hour = 0;
            set @concept_name_full_id_hour = 0;

            set @concept_id_day = 0;
            set @concept_name_short_id_day = 0;
            set @concept_name_full_id_day = 0;

            set @concept_id_week = 0;
            set @concept_name_short_id_week = 0;
            set @concept_name_full_id_week = 0;

            set @concept_id_month = 0;
            set @concept_name_short_id_month = 0;
            set @concept_name_full_id_month = 0;

            set @concept_id_year = 0;
            set @concept_name_short_id_year = 0;
            set @concept_name_full_id_year = 0;


            call add_concept(@concept_id_units_of_time, @concept_name_short_id_units_of_time, @concept_name_full_id_units_of_time,
            'Units of Time', 'Units of Time', 'Coded', 'Valueset', false);

            call add_concept(@concept_id_second, @concept_name_short_id_second, @concept_name_full_id_second, 'second', 's', 'N/A', 'Misc', false);
            call add_concept(@concept_id_minute, @concept_name_short_id_minute, @concept_name_full_id_minute, 'minute', 'm', 'N/A', 'Misc', false);
            call add_concept(@concept_id_hour, @concept_name_short_id_hour, @concept_name_full_id_hour, 'hour', 'h', 'N/A', 'Misc', false);
            call add_concept(@concept_id_day, @concept_name_short_id_day, @concept_name_full_id_day, 'day', 'd', 'N/A', 'Misc', false);
            call add_concept(@concept_id_week, @concept_name_short_id_week, @concept_name_full_id_week, 'week', 'wk', 'N/A', 'Misc', false);
            call add_concept(@concept_id_month, @concept_name_short_id_month, @concept_name_full_id_month, 'month', 'mo', 'N/A', 'Misc', false);
            call add_concept(@concept_id_year, @concept_name_short_id_year, @concept_name_full_id_year, 'year', 'a', 'N/A', 'Misc', false);

            call add_concept_answer(@concept_id_units_of_time, @concept_id_second, 1);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_minute, 2);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_hour, 3);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_day, 4);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_week, 5);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_month, 6);
            call add_concept_answer(@concept_id_units_of_time, @concept_id_year, 7);

            call add_concept_word(@concept_id_units_of_time, @concept_name_short_id_units_of_time, 'UNIT', 1);
            call add_concept_word(@concept_id_units_of_time, @concept_name_full_id_units_of_time, 'TIME', 1);

            call add_concept_word(@concept_id_second, @concept_name_full_id_second, 'SECOND', 1);
            call add_concept_word(@concept_id_minute, @concept_name_full_id_minute, 'MINUTE', 1);
            call add_concept_word(@concept_id_hour, @concept_name_full_id_hour, 'HOUR', 1);
            call add_concept_word(@concept_id_day, @concept_name_full_id_day, 'DAY', 1);
            call add_concept_word(@concept_id_week, @concept_name_full_id_week, 'WEEK', 1);
            call add_concept_word(@concept_id_month, @concept_name_full_id_month, 'MONTH', 1);
            call add_concept_word(@concept_id_year, @concept_name_full_id_year, 'YEAR', 1);

            call add_concept_events(@concept_id_units_of_time, 'Valueset');
            call add_concept_events(@concept_id_second, 'Misc');
            call add_concept_events(@concept_id_minute, 'Misc');
            call add_concept_events(@concept_id_hour, 'Misc');
            call add_concept_events(@concept_id_day, 'Misc');
            call add_concept_events(@concept_id_week, 'Misc');
            call add_concept_events(@concept_id_month, 'Misc');
            call add_concept_events(@concept_id_year, 'Misc');
        </sql>
    </changeSet>

    <changeSet id="BD-201412171635" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Quantity Units';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_quantity_units = 0;
            set @concept_name_short_id_quantity_units = 0;
            set @concept_name_full_id_quantity_units = 0;

            set @concept_id_gram = 0;
            set @concept_name_short_id_gram = 0;
            set @concept_name_full_id_gram = 0;

            set @concept_id_milligram = 0;
            set @concept_name_short_id_milligram = 0;
            set @concept_name_full_id_milligram = 0;

            set @concept_id_microgram = 0;
            set @concept_name_short_id_microgram = 0;
            set @concept_name_full_id_microgram = 0;

            set @concept_id_unit = 0;
            set @concept_name_short_id_unit = 0;
            set @concept_name_full_id_unit = 0;

            set @concept_id_thousand_units = 0;
            set @concept_name_short_id_thousand_units = 0;
            set @concept_name_full_id_thousand_units = 0;

            set @concept_id_million_units = 0;
            set @concept_name_short_id_million_units = 0;
            set @concept_name_full_id_million_units = 0;

            set @concept_id_millimole = 0;
            set @concept_name_short_id_millimole = 0;
            set @concept_name_full_id_millimole = 0;

            set @concept_id_millilitre = 0;
            set @concept_name_short_id_millilitre = 0;
            set @concept_name_full_id_millilitre = 0;


            call add_concept(@concept_id_quantity_units, @concept_name_short_id_quantity_units, @concept_name_full_id_quantity_units,
            'Quantity Units', 'Quantity Units', 'Coded', 'Valueset', false);

            call add_concept(@concept_id_gram, @concept_name_short_id_gram, @concept_name_full_id_gram, 'gram', 'g', 'N/A', 'Misc', false);
            call add_concept(@concept_id_milligram, @concept_name_short_id_milligram, @concept_name_full_id_milligram, 'milligram', 'mg', 'N/A', 'Misc', false);
            call add_concept(@concept_id_microgram, @concept_name_short_id_microgram, @concept_name_full_id_microgram, 'microgram', 'mcg', 'N/A', 'Misc', false);
            call add_concept(@concept_id_unit, @concept_name_short_id_unit, @concept_name_full_id_unit, 'unit', 'U', 'N/A', 'Misc', false);
            call add_concept(@concept_id_thousand_units, @concept_name_short_id_thousand_units, @concept_name_full_id_thousand_units, 'thousand units', 'TU', 'N/A', 'Misc', false);
            call add_concept(@concept_id_million_units, @concept_name_short_id_million_units, @concept_name_full_id_million_units, 'million units', 'MU', 'N/A', 'Misc', false);
            call add_concept(@concept_id_millimole, @concept_name_short_id_millimole, @concept_name_full_id_millimole, 'millimole', 'mmol', 'N/A', 'Misc', false);
            call add_concept(@concept_id_millilitre, @concept_name_short_id_millilitre, @concept_name_full_id_millilitre, 'millilitre', 'ml', 'N/A', 'Misc', false);

            call add_concept_answer(@concept_id_quantity_units, @concept_id_gram, 1);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_milligram, 2);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_microgram, 3);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_unit, 4);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_thousand_units, 5);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_million_units, 6);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_millimole, 7);
            call add_concept_answer(@concept_id_quantity_units, @concept_id_millilitre, 8);

            call add_concept_word(@concept_id_quantity_units, @concept_name_short_id_quantity_units, 'UNIT', 1);
            call add_concept_word(@concept_id_quantity_units, @concept_name_full_id_quantity_units, 'QUANTITY', 1);

            call add_concept_word(@concept_id_gram, @concept_name_full_id_gram, 'GRAM', 1);
            call add_concept_word(@concept_id_milligram, @concept_name_full_id_milligram, 'MILLIGRAM', 1);
            call add_concept_word(@concept_id_microgram, @concept_name_full_id_microgram, 'MICROGRAM', 1);
            call add_concept_word(@concept_id_unit, @concept_name_full_id_unit, 'UNIT', 1);
            call add_concept_word(@concept_id_thousand_units, @concept_name_full_id_thousand_units, 'THOUSAND', 1);
            call add_concept_word(@concept_id_thousand_units, @concept_name_short_id_thousand_units, 'UNITS', 1);
            call add_concept_word(@concept_id_million_units, @concept_name_full_id_million_units, 'MILLION', 1);
            call add_concept_word(@concept_id_million_units, @concept_name_short_id_million_units, 'UNITS', 1);
            call add_concept_word(@concept_id_millimole, @concept_name_full_id_millimole, 'MILLIMOLE', 1);
            call add_concept_word(@concept_id_millilitre, @concept_name_full_id_millilitre, 'MILLILITRE', 1);

            call add_concept_events(@concept_id_quantity_units, 'Valueset');
            call add_concept_events(@concept_id_gram, 'Misc');
            call add_concept_events(@concept_id_milligram, 'Misc');
            call add_concept_events(@concept_id_microgram, 'Misc');
            call add_concept_events(@concept_id_unit, 'Misc');
            call add_concept_events(@concept_id_thousand_units, 'Misc');
            call add_concept_events(@concept_id_million_units, 'Misc');
            call add_concept_events(@concept_id_millimole, 'Misc');
            call add_concept_events(@concept_id_millilitre, 'Misc');
        </sql>
    </changeSet>


    <changeSet id="BD-201412171735" author="utsab">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Route of Administration';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_route_of_administration = 0;
            set @concept_name_short_id_route_of_administration = 0;
            set @concept_name_full_id_route_of_administration = 0;

            set @concept_id_implant = 0;
            set @concept_name_short_id_implant = 0;
            set @concept_name_full_id_implant = 0;

            call add_concept(@concept_id_route_of_administration, @concept_name_short_id_route_of_administration, @concept_name_full_id_route_of_administration,
            'Route of Administration', 'Route of Administration', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id_route_of_administration, @concept_name_short_id_route_of_administration, 'ROUTE', 1);
            call add_concept_word(@concept_id_route_of_administration, @concept_name_full_id_route_of_administration, 'ADMINISTRATION', 1);
            call add_concept_events(@concept_id_route_of_administration, 'Valueset');

            call add_concept(@concept_id_implant, @concept_name_short_id_implant, @concept_name_full_id_implant, 'implant', 'implant', 'N/A', 'Misc', false);
            call add_concept_answer(@concept_id_route_of_administration, @concept_id_implant, 1);
            call add_concept_word(@concept_id_implant, @concept_name_short_id_implant, 'IMPLANT', 1);
            call add_concept_events(@concept_id_implant, 'Misc');
        </sql>
    </changeSet>

    <changeSet id="BD-201501021144" author="sanjana">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                select count(*) from concept_name where name = 'Immunization Incident';
            </sqlCheck>
        </preConditions>
        <sql>
            set @concept_id_immunization_incident = 0;
            set @concept_id = 0;
            set @concept_name_short_id = 0;
            set @concept_name_full_id = 0;
            set @concept_answer_id=0;
            set @concept_source_id_for_SNOWMED=0;
            set @concept_map_type_id_for_SAMEAS=0;

            -- Creating Immunization concept
            call add_concept(@concept_id_immunization_incident, @concept_name_short_id, @concept_name_full_id,
            'Immunization Incident', 'Immunization Incident', 'N/A', 'ConvSet', true);
            call add_concept_word(@concept_id_immunization_incident, @concept_name_short_id, 'IMMUNIZATION', 1);
            call add_concept_word(@concept_id_immunization_incident, @concept_name_short_id, 'INCIDENT', 1);

            -- Creating Vaccine concept
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Vaccine', 'Vaccine', 'Coded', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'VACCINE', 1);
            call add_concept_events(@concept_id, 'Misc');
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 1);

            -- Creating Vaccination Date concept
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Vaccination Date', 'Vaccination Date', 'Date', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'VACCINATION', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'DATE', 1);
            call add_concept_events(@concept_id, 'Misc');
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 2);

            -- Creating Dosage concept
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Dosage', 'Dosage', 'Numeric', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'DOSAGE', 1);
            call add_concept_events(@concept_id, 'Misc');
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 3);

            -- Adding Quantity concept to immuniztion incident
            select concept_id from concept_name where name = 'Quantity Units' and concept_name_type='FULLY_SPECIFIED' into @concept_id;
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 4);

            -- Creating Vaccination Reported concept
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Vaccination Reported', 'Vaccination Reported', 'Boolean', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'VACCINATION', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'REPORTED', 1);
            call add_concept_events(@concept_id, 'Misc');
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 4);

            -- Creating Travel Vaccinations concept
            call add_concept(@concept_answer_id, @concept_name_short_id, @concept_name_full_id,
            'Travel vaccinations', 'Travel vaccinations', 'N/A', 'Misc', false);
            call add_concept_word(@concept_answer_id, @concept_name_short_id, 'TRAVEL', 1);
            call add_concept_word(@concept_answer_id, @concept_name_short_id, 'VACCINATIONS', 1);
            call add_concept_events(@concept_answer_id, 'Misc');

            -- Creating Travel Vaccinations Reference term concept
            select concept_source_id into @concept_source_id_for_SNOWMED from concept_reference_source where name = 'SNOMED-BD';
            select concept_map_type_id into @concept_map_type_id_for_SAMEAS from concept_map_type where name = 'SAME-AS';
            call add_concept_reference_map(@concept_answer_id, @concept_source_id_for_SNOWMED, '281657000', 'Travel vaccinations', @concept_map_type_id_for_SAMEAS);

            -- Creating Immunization Reason Valueset concept and adding Travel Vaccinations as answer
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Immunization Reason', 'Immunization Reason', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'IMMUNIZATION', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'REASON', 1);
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 5);
            call add_concept_answer(@concept_id, @concept_answer_id, 1);
            call add_concept_events(@concept_id, 'Valueset');

            -- Creating Vaccination refused concept
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'Vaccination Refused', 'Vaccination Refused', 'Boolean', 'Misc', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'VACCINATION', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'REFUSED', 1);
            call add_concept_events(@concept_id, 'Misc');
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 6);

            -- Creating Patient Objection concept
            call add_concept(@concept_answer_id, @concept_name_short_id, @concept_name_full_id,
            'patient objection', 'PATOBJ', 'N/A', 'Misc', false);
            call add_concept_word(@concept_answer_id, @concept_name_short_id, 'PATIENT', 1);
            call add_concept_word(@concept_answer_id, @concept_name_short_id, 'OBJECTION', 1);
            call add_concept_events(@concept_answer_id, 'Misc');

            -- Creating Immunization Reason Valueset concept and adding parent objection as answer
            call add_concept(@concept_id, @concept_name_short_id, @concept_name_full_id,
            'No Immunization Reason', 'No Immunization Reason', 'Coded', 'Valueset', false);
            call add_concept_word(@concept_id, @concept_name_short_id, 'IMMUNIZATION', 1);
            call add_concept_word(@concept_id, @concept_name_short_id, 'REASON', 1);
            call add_concept_set_members(@concept_id_immunization_incident, @concept_id, 7);
            call add_concept_answer(@concept_id, @concept_answer_id, 1);
            call add_concept_events(@concept_id, 'Valueset');

            -- Adding immunization incident to event_records
            call add_concept_events(@concept_id_immunization_incident, 'ConvSet');
        </sql>
    </changeSet>

    <changeSet id="BD-201501051058" author="sanjana" context="setup">
        <comment>Fix Add Concept Reference Event Proc</comment>
        <sql>
            DROP PROCEDURE IF EXISTS add_concept_reference_map;
        </sql>
        <sqlFile splitStatements="false" path="storedProcedures/FixAddConceptReferenceMapProc.sql"/>
    </changeSet>

    <changeSet id="BD-201501051108" author="sanjana">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="1">
                select count(*) from concept_reference_term where name  = 'Travel vaccinations';
            </sqlCheck>
        </preConditions>
        <sql>
            set @reference_term_id = 0;
            select concept_reference_term_id from concept_reference_term where name  = 'Travel vaccinations' into @reference_term_id;
            call add_concept_reference_events(@reference_term_id);
        </sql>
    </changeSet>
</databaseChangeLog>